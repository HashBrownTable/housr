"use strict";angular.module("housrApp",["ngCookies","ngResource","ngSanitize","btford.socket-io","ui.router","ngAnimate","ngAria","ngImgCrop","ngMaterial"]).config(["$stateProvider","$urlRouterProvider","$locationProvider","$httpProvider","$mdThemingProvider",function(a,b,c,d,e){b.otherwise("/"),d.interceptors.push("authInterceptor"),e.theme("default").primaryPalette("blue").accentPalette("pink")}]).factory("authInterceptor",["$rootScope","$q","$cookieStore","$location",function(a,b,c,d){return a.domain="","file:"===window.location.protocol&&(a.domain="http://housr.fn.lc"),{request:function(a){return a.headers=a.headers||{},c.get("token")&&(a.headers.Authorization="Bearer "+c.get("token")),a},responseError:function(a){return 401===a.status?(d.path("/login"),c.remove("token"),b.reject(a)):b.reject(a)}}}]).run(["$rootScope","$location","Auth",function(a,b,c){a.$on("$stateChangeStart",function(d,e){c.isLoggedInAsync(function(a){e.authenticate&&!a&&b.path("/login")}),console.log(e.url),a.showNav=!0,("/login"===e.url||"/signup"===e.url)&&(console.log("showNav"),a.showNav=!1),a.matchesNav="matches","/matches"===e.url?a.matchesNav="matches":"/like"===e.url?a.matchesNav="like":"/dislike"===e.url&&(a.matchesNav="dislike"),a.data.navIndex="/"===e.url?0:e.url.match("/chats")?1:e.url.match("/landlords")?2:3})}]),angular.module("housrApp").controller("NavCtrl",["$scope","$rootScope","$mdSidenav","User","$location","socket","$mdToast",function(a,b,c,d,e,f,g){var h=function(b){"#/signup"!==b&&"/signup"!==e.hash()&&d.get(function(b){console.log(b),a.me=b,a.toggleLeft=function(){console.log("sidenav toggle"),c("left").toggle()}})};h(),b.$on("$stateChangeStart",function(a,b){h(b.url)}),a.data={navIndex:3,notificationCount:0},f.socket.on("notification",function(b){_.include(b.targets,a.me._id)&&!e.hash().match("/chat/"+b.id)&&(a.data.notificationCount+=1,g.show(g.simple().content(b.msg)))}),b.data=a.data,$("body").on("click","md-tab",function(){var b=a.data.navIndex;1===b&&(a.data.notificationCount=0),e.path($("md-tab").eq(b).attr("ng-href"))})}]),angular.module("housrApp").controller("SidenavCtrl",["$scope","$rootScope","$mdSidenav",function(a,b,c){a.close=function(){console.log("sidenav toggle within sidenav"),c("left").close()}}]),angular.module("housrApp").factory("LikeDislike",["$resource","$rootScope",function(a,b){return a(b.domain+"/api/likedislikes/:id/:controller",{id:"@_id"},{save:{method:"POST",params:{controller:"",id:""}},get:{method:"GET",params:{id:""},isArray:!0}})}]),angular.module("housrApp").config(["$stateProvider",function(a){a.state("login",{url:"/login",templateUrl:"app/account/login/login.html",controller:"LoginCtrl"}).state("signup",{url:"/signup",templateUrl:"app/account/signup/signup.html",controller:"SignupCtrl"}).state("settings",{url:"/settings",templateUrl:"app/account/settings/settings.html",controller:"SettingsCtrl",authenticate:!0})}]),angular.module("housrApp").controller("LoginCtrl",["$scope","Auth","$location","$window",function(a,b,c,d){a.user={},a.errors={},a.login=function(d){a.submitted=!0,d.$valid&&b.login({email:a.user.email,password:a.user.password}).then(function(){c.path("/")})["catch"](function(b){a.errors.other=b.message})},a.loginOauth=function(a){d.location.href="/auth/"+a}}]),angular.module("housrApp").controller("LogoutCtrl",["$scope","$location","Auth",function(a,b,c){a.message="Logging Out",c.logout(),b.path("/")}]),angular.module("housrApp").config(["$stateProvider",function(a){a.state("logout",{url:"/logout",templateUrl:"app/account/logout/logout.html",controller:"LogoutCtrl"})}]),angular.module("housrApp").controller("SettingsCtrl",["$scope","User","Auth",function(a,b,c){a.errors={},a.changePassword=function(b){a.submitted=!0,b.$valid&&c.changePassword(a.user.oldPassword,a.user.newPassword).then(function(){a.message="Password successfully changed."})["catch"](function(){b.password.$setValidity("mongoose",!1),a.errors.other="Incorrect password",a.message=""})}}]),angular.module("housrApp").controller("SignupCtrl",["$scope","Auth","$location","$window",function(a,b,c,d){a.user={},a.errors={},a.register=function(d){a.submitted=!0,d.$valid&&b.createUser({name:a.user.name,email:a.user.email,password:a.user.password}).then(function(){c.path("/")})["catch"](function(b){b=b.data,a.errors={},angular.forEach(b.errors,function(b,c){d[c].$setValidity("mongoose",!1),a.errors[c]=b.message})})},a.loginOauth=function(a){d.location.href="/auth/"+a}}]),angular.module("housrApp").controller("AdminCtrl",["$scope","$http","Auth","User",function(a,b,c,d){a.users=d.query(),a["delete"]=function(b){d.remove({id:b._id}),angular.forEach(a.users,function(c,d){c===b&&a.users.splice(d,1)})}}]),angular.module("housrApp").config(["$stateProvider",function(a){a.state("admin",{url:"/admin",templateUrl:"app/admin/admin.html",controller:"AdminCtrl"})}]),angular.module("housrApp").controller("ChatCtrl",["$scope","$rootScope","User","$stateParams","Chats","socket","$mdBottomSheet","$location",function(a,b,c,d,e,f,g,h){var i=d.id;a.userDetails={},b.userDetails=a.userDetails,c.get(function(d){e.get({id:i},function(b){_.each(b.people,function(b){c.get({id:b},function(c){a.userDetails[b]=c,a.people=_.pluck(_.values(a.userDetails),"name").join(", ")})}),a.moment=moment;var g=setInterval(function(){e.get({id:i},function(b){a.messages=b.messages,a.scrollBottom()})},500);a.$on("$destroy",function(){clearInterval(g)}),a.messages=b.messages,a.scrollBottom=function(){_.defer(function(){$("md-list.scroll")[0].scrollTop=1e10})},a.scrollBottom(),f.socket.on("match:"+i+":save",function(b){a.messages=b,a.scrollBottom(),a.$digest()}),a.send=function(){if(a.message.length>0){var b={id:d._id,text:a.message,date:new Date};a.messages.push(b),f.socket.emit("match:message",{id:i,message:b}),a.message="",a.scrollBottom()}}});var g=d;e.get(function(d){_.each(d.chats,function(d){_.each(d.people,function(d){if(d!=g._id)if(a.userDetails[d]){var e=a.userDetails[d];b.items=_.uniq(b.items.concat([{name:e.name,picture:e.picture}]),function(a){return a.name})}else c.get({id:d},function(a){b.items=_.uniq(b.items.concat([{name:a.name,_id:a._id,picture:a.picture}]),function(a){return a.name})})})})})}),b.items=[],a.showGridBottomSheet=function(b){a.alert="",g.show({templateUrl:"app/chat/bottom-sheet.html",controller:"GridBottomSheetCtrl",targetEvent:b}).then(function(a){var b={id:i,targetId:a._id};console.log("chat",b),e.add(b,function(a){h.path("/chat/"+a._id)})})}}]).controller("GridBottomSheetCtrl",["$scope","$rootScope","$mdBottomSheet",function(a,b,c){a.items=b.items,a.listItemClick=function(b){var d=a.items[b];c.hide(d)}}]),angular.module("housrApp").config(["$stateProvider",function(a){a.state("chat",{url:"/chat/:id",templateUrl:"app/chat/chat.html",controller:"ChatCtrl"})}]),angular.module("housrApp").factory("Chats",["$resource","$rootScope",function(a,b){return a(b.domain+"/api/matches/:id/:controller",{id:"@_id"},{get:{method:"GET",params:{}},add:{method:"POST",params:{controller:"add"}}})}]),angular.module("housrApp").controller("ChatsCtrl",["$scope","Chats","User",function(a,b,c){var d="abc",e="abc";a.message="Hello",b.get(function(b){a.chats=b.chats,console.log(a.chats),console.log(b),c.get(function(b){d=b._id,console.log(d),a.chats.forEach(function(b,f){b.people.forEach(function(b){b!==d&&(e=b,console.log(e),c.get({id:e},function(b){a.chats[f].names?a.chats[f].names+=", "+b.name:a.chats[f].names=b.name,a.chats[f].face=b.picture}))})})})})}]),angular.module("housrApp").config(["$stateProvider",function(a){a.state("chats",{url:"/chats",templateUrl:"app/chats/chats.html",controller:"ChatsCtrl",authenticate:!0})}]),angular.module("housrApp").controller("DetailsCtrl",["$scope","User","LikeDislike","$stateParams",function(a,b,c,d){a.message="Hello",a.user={name:"Loading..."},a.moment=moment,a.Likes=[],a.Roommates=[],c.get(function(c){a.Likes=c,_.filter(c,function(a){return"like"==a.type}).forEach(function(c,d){b.get({id:c.targetId},function(b){a.Likes[d].userData=b,a.Likes[d].name=b.name,a.Roommates.push(b),a.Roommates=_.uniq(a.Roommates,function(a){return a.name})})})}),b.get({id:d.id},function(b){a.user=b})}]),angular.module("housrApp").config(["$stateProvider",function(a){a.state("details",{url:"/details/:id",templateUrl:"app/details/details.html",controller:"DetailsCtrl"})}]),angular.module("housrApp").controller("DislikeCtrl",["$scope","LikeDislike","User",function(a,b,c){a.message="Hello",a.dislikes=[],b.get(function(b){console.log("dislike debug"),console.log(b),a.dislikes=b,a.dislikes.forEach(function(b,d){c.get({id:b.targetId},function(b){a.dislikes[d].userData=b,a.dislikes[d].name=b.name,console.log(b)})})}),a.dislike=function(){alert("hi world")},a.like=function(){alert("hi world")},a.saveStub=function(){alert("Placeholder")}}]),angular.module("housrApp").config(["$stateProvider",function(a){a.state("dislike",{url:"/dislike",templateUrl:"app/like/like.html",controller:"LikeCtrl"})}]),angular.module("housrApp").directive("likeDislikeButtons",["LikeDislike",function(a){return{templateUrl:"app/like-dislike-buttons/like-dislike-buttons.html",restrict:"EA",scope:{user:"="},link:function(b,c,d){console.log("foo",d,b.user),b.dislike=function(c){a.save({targetId:c._id,type:"dislike"}),b.hide(c)},b.like=function(c){a.save({targetId:c._id,type:"like"},function(){}),b.hide(c)},b.hide=function(){c.parents("md-card").animate({opacity:0}).slideUp()}}}}]),angular.module("housrApp").controller("LikeCtrl",["$scope","LikeDislike","User","$location",function(a,b,c,d){function e(b,d){c.get({id:b.targetId},function(b){b&&(a.likePeople[d].userData=b,_.each(b,function(b,c){a.likePeople[d][c]=b})),console.log("populate",a.likePeople)})}a.message="Hello",a.likes=[],a.likePeople=[],a.dislike=function(a){var b="/like"===d.path();a&&("dislike"!=a.type||b?a.type="dislike":console.log(a),alert("dislike"))},a.stilllike=function(a){var b="/like"===d.path();a&&("like"==a.type&&b?console.log(a):a.type="dislike")};var f="/like"===d.path();b.get(function(b){console.log("like controller debug"),console.log(b),b.forEach(function(b){"like"===b.type&&f?(console.log("like"),a.likePeople.push(b)):"dislike"!==b.type||f||(console.log("dislike"),a.likePeople.push(b))}),console.log("like peole:"+a.likePeople.length),a.likePeople.forEach(e),console.log("$scope.likePeople"),console.log(a.likePeople)})}]),angular.module("housrApp").config(["$stateProvider",function(a){a.state("like",{url:"/like",templateUrl:"app/like/like.html",controller:"LikeCtrl"})}]);var cities=[{city:"Toronto",desc:"This is the best city in the world!",lat:43.7,"long":-79.4},{city:"New York",desc:"This city is aiiiiite!",lat:40.67,"long":-73.94},{city:"Chicago",desc:"This is the second best city in the world!",lat:41.8819,"long":-87.6278},{city:"Los Angeles",desc:"This city is live!",lat:34.05,"long":-118.25},{city:"Las Vegas",desc:"Sin City...'nuff said!",lat:36.08,"long":-115.1522}];angular.module("housrApp").controller("MapsCtrl",["$scope","Maps","User",function(a,b,c){a.beds=1,a.rangeLower=0,a.rangeHigher=1e4,a.location="Seattle",c.get(function(b){a.beds=b.preferedNumber,a.rangeLower=parseInt(b.priceRange[0])*b.preferedNumber,a.rangeHigher=parseInt(b.priceRange[1])*b.preferedNumber,a.location=b.preferedLocation})}]),angular.module("housrApp").config(["$stateProvider",function(a){a.state("maps",{url:"/landlords",templateUrl:"app/maps/maps.html",controller:"MapsCtrl"})}]),angular.module("housrApp").factory("Maps",["$resource","$rootScope",function(a,b){return a(b.domain+"/api/properties",{id:"@_id"},{properties:{method:"GET",params:{}}})}]),angular.module("housrApp").controller("MatchesCtrl",["$scope","User","LikeDislike","$location",function(a,b,c,d){window.localStorage.firstTime||(d.path("/pref"),window.localStorage.firstTime="no"),b.matches(function(b){a.matches=b}),c.get(function(b){var c=[],d=[];b.forEach(function(a,b){"like"==a.type?c.push(a[b]):"dislike"==a.type&&d.push(a[b])}),a.numLikes=c.length,a.numDislikes=d.length,console.log(a.numLikes),console.log(a.numDislikes)})}]),angular.module("housrApp").config(["$stateProvider",function(a){a.state("matches",{url:"/",templateUrl:"app/matches/matches.html",controller:"MatchesCtrl",authenticate:!0})}]),angular.module("housrApp").controller("PrefCtrl",["$scope","User","$location",function(a,b,c){a.saveStub=function(){alert("Placeholder")},b.get(function(b){console.log(b),a.user=b,("female"===b.preferedGender||"both"==b.preferedGender)&&(a.user.prefFemale=!0),("male"===b.preferedGender||"both"==b.preferedGender)&&(a.user.prefMale=!0)}),a.check=function(){console.log("check called"),b.get(function(){})},a.save=function(){var d="both";a.user.prefFemale?d="female":a.user.prefMale&&(d="male");var e=a.user.prefFemale&&a.user.prefMale;(e||!e)&&(d="both"),a.user.preferedGender=d,b.savePrefs(a.user,function(){c.path("/")})};var d=function(b){var c=b.currentTarget.files[0],d=new FileReader;d.onload=function(b){a.$apply(function(a){a.myImage=b.target.result})},d.readAsDataURL(c),d.onload=function(b){var c=b.target.result;a.user.picture=c}};angular.element(document.querySelector("#fileInput")).on("change",d)}]),angular.module("housrApp").config(["$stateProvider",function(a){a.state("pref",{url:"/pref",templateUrl:"app/pref/pref.html",controller:"PrefCtrl"})}]),angular.module("housrApp").factory("Auth",["$location","$rootScope","$http","User","$cookieStore","$q",function(a,b,c,d,e,f){var g={};return e.get("token")&&(g=d.get()),{login:function(a,h){var i=h||angular.noop,j=f.defer();return c.post(b.domain+"/auth/local",{email:a.email,password:a.password}).success(function(a){return e.put("token",a.token),g=d.get(),j.resolve(a),i()}).error(function(a){return this.logout(),j.reject(a),i(a)}.bind(this)),j.promise},logout:function(){e.remove("token"),g={}},createUser:function(a,b){var c=b||angular.noop;return d.save(a,function(b){return e.put("token",b.token),g=d.get(),c(a)},function(a){return this.logout(),c(a)}.bind(this)).$promise},changePassword:function(a,b,c){var e=c||angular.noop;return d.changePassword({id:g._id},{oldPassword:a,newPassword:b},function(a){return e(a)},function(a){return e(a)}).$promise},getCurrentUser:function(){return g},isLoggedIn:function(){return g.hasOwnProperty("role")},isLoggedInAsync:function(a){g.hasOwnProperty("$promise")?g.$promise.then(function(){a(!0)})["catch"](function(){a(!1)}):a(g.hasOwnProperty("role")?!0:!1)},isAdmin:function(){return"admin"===g.role},getToken:function(){return e.get("token")}}}]),angular.module("housrApp").factory("User",["$resource","$rootScope",function(a,b){return a(b.domain+"/api/users/:id/:controller",{id:"@_id"},{changePassword:{method:"PUT",params:{controller:"password"}},savePrefs:{method:"POST",params:{id:"me",controller:"savePrefs"}},get:{method:"GET",params:{id:"me"}},matches:{method:"GET",params:{id:"",controller:"matches"},isArray:!0}})}]),angular.module("housrApp").directive("mongooseError",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){b.on("keydown",function(){return d.$setValidity("mongoose",!0)})}}}),angular.module("housrApp").controller("NavbarCtrl",["$scope","$location","Auth",function(a,b,c){a.menu=[{title:"Home",link:"/"}],a.isCollapsed=!0,a.isLoggedIn=c.isLoggedIn,a.isAdmin=c.isAdmin,a.getCurrentUser=c.getCurrentUser,a.logout=function(){c.logout(),b.path("/login")},a.isActive=function(a){return a===b.path()}}]),angular.module("housrApp").factory("socket",["socketFactory","$rootScope",function(a,b){var c=io("",{path:b.domain+"/socket.io-client"}),d=a({ioSocket:c});return{socket:d,syncUpdates:function(a,b,c){c=c||angular.noop,d.on(a+":save",function(a){var d=_.find(b,{_id:a._id}),e=b.indexOf(d),f="created";d?(b.splice(e,1,a),f="updated"):b.push(a),c(f,a,b)}),d.on(a+":remove",function(a){var d="deleted";_.remove(b,{_id:a._id}),c(d,a,b)})},unsyncUpdates:function(a){d.removeAllListeners(a+":save"),d.removeAllListeners(a+":remove")}}}]),angular.module("housrApp").run(["$templateCache",function(a){a.put("app/account/login/login.html",'<div ng-include="\'components/navbar/navbar.html\'"></div><div layout-fill><div layout=row layout-align="center center"><md-card class="form md-whiteframe-z3 demo-container login-container" flex=100 flex-md=66 flex-gt-md=50><div class=login-hero><div class=overlay><img src=assets/images/68b83566.logo.png><p>Find a roommate, lower your rent.</p></div></div><md-card-content><form name=form ng-submit=login(form) novalidate><h2>Login</h2><md-input-container><label>Email</label><input type=email name=email class=form-control ng-model=user.email required></md-input-container><md-input-container><label>Password</label><input type=password name=password class=form-control ng-model=user.password required></md-input-container><div class="form-group has-error"><p class=help-block ng-show="form.email.$error.required && form.password.$error.required && submitted">Please enter your email and password.</p><p class=help-block ng-show="form.email.$error.email && submitted">Please enter a valid email.</p><p class=help-block>{{ errors.other }}</p></div><div><md-button class=md-primary type=submit>Login</md-button>&nbsp;&nbsp;<md-button href=/signup>Register</md-button></div><br><md-divider></md-divider><br><br><div class=login-buttons><a class="btn btn-facebook" href="" ng-click="loginOauth(\'facebook\')" flex-sm=99><i class="fa fa-facebook"></i> Connect with Facebook</a>&nbsp; <a class="btn btn-google-plus" href="" ng-click="loginOauth(\'google\')" flex-sm=99><i class="fa fa-google-plus"></i> Connect with Google+</a>&nbsp; <a class="btn btn-twitter" href="" ng-click="loginOauth(\'twitter\')" flex-sm=99><i class="fa fa-twitter"></i> Connect with Twitter</a></div></form></md-card-content></md-card></div></div>'),a.put("app/account/logout/logout.html","<div class=col-md-12>This is the logout view.</div>"),a.put("app/account/settings/settings.html",'<div ng-include="\'components/navbar/navbar.html\'"></div><div class=container><div class=row><div class=col-sm-12><h1>Change Password</h1></div><div class=col-sm-12><form class=form name=form ng-submit=changePassword(form) novalidate><div class=form-group><label>Current Password</label><input type=password name=password class=form-control ng-model=user.oldPassword mongoose-error><p class=help-block ng-show=form.password.$error.mongoose>{{ errors.other }}</p></div><div class=form-group><label>New Password</label><input type=password name=newPassword class=form-control ng-model=user.newPassword ng-minlength=3 required><p class=help-block ng-show="(form.newPassword.$error.minlength || form.newPassword.$error.required) && (form.newPassword.$dirty || submitted)">Password must be at least 3 characters.</p></div><p class=help-block>{{ message }}</p><button class="btn btn-lg btn-primary" type=submit>Save changes</button></form></div></div></div>'),a.put("app/account/signup/signup.html",'<div ng-include="\'components/navbar/navbar.html\'"></div><div layout-fill><div layout=row layout-align="center center"><md-card class="form md-whiteframe-z3 demo-container login-container" flex=100 flex-md=66 flex-gt-md=50><div class=login-hero><div class=overlay><img src=assets/images/68b83566.logo.png><p>Find a roommate, lower your rent.</p></div></div><md-card-content><form class=form name=form ng-submit=register(form) novalidate><md-input-container class=form-group ng-class="{ \'has-success\': form.name.$valid && submitted,\n                                              \'has-error\': form.name.$invalid && submitted }"><label>Name</label><input name=name class=form-control ng-model=user.name required><p class=help-block ng-show="form.name.$error.required && submitted">A name is required</p></md-input-container><md-input-container class=form-group ng-class="{ \'has-success\': form.email.$valid && submitted,\n                                              \'has-error\': form.email.$invalid && submitted }"><label>Email</label><input type=email name=email class=form-control ng-model=user.email required mongoose-error><p class=help-block ng-show="form.email.$error.email && submitted">Doesn\'t look like a valid email.</p><p class=help-block ng-show="form.email.$error.required && submitted">What\'s your email address?</p><p class=help-block ng-show=form.email.$error.mongoose>{{ errors.email }}</p></md-input-container><md-input-container class=form-group ng-class="{ \'has-success\': form.password.$valid && submitted,\n                                              \'has-error\': form.password.$invalid && submitted }"><label>Password</label><input type=password name=password class=form-control ng-model=user.password ng-minlength=3 required mongoose-error><p class=help-block ng-show="(form.password.$error.minlength || form.password.$error.required) && submitted">Password must be at least 3 characters.</p><p class=help-block ng-show=form.password.$error.mongoose>{{ errors.password }}</p></md-input-container><div><md-button class=md-primary type=submit>Sign up</md-button><md-button href=/login>Login</md-button></div><br><md-divider></md-divider><br><br><div class=login-buttons><a class="btn btn-facebook" href="" ng-click="loginOauth(\'facebook\')" flex-sm=99><i class="fa fa-facebook"></i> Connect with Facebook</a>&nbsp; <a class="btn btn-google-plus" href="" ng-click="loginOauth(\'google\')" flex-sm=99><i class="fa fa-google-plus"></i> Connect with Google+</a>&nbsp; <a class="btn btn-twitter" href="" ng-click="loginOauth(\'twitter\')" flex-sm=99><i class="fa fa-twitter"></i> Connect with Twitter</a></div></form></md-card-content></md-card></div></div>'),a.put("app/admin/admin.html",'<div ng-include="\'components/navbar/navbar.html\'"></div><div class=container><p>The delete user and user index api routes are restricted to users with the \'admin\' role.</p><ul class=list-group><li class=list-group-item ng-repeat="user in users"><strong>{{user.name}}</strong><br><span class=text-muted>{{user.email}}</span> <a ng-click=delete(user) class=trash><span class="glyphicon glyphicon-trash pull-right"></span></a></li></ul></div>'),a.put("app/chat/bottom-sheet.html",'<md-bottom-sheet class=md-grid><h4>Select someone to add to the conversation.</h4><md-list><md-item ng-repeat="item in items"><md-button class=md-grid-item-content aria-label={{item.name}} ng-click=listItemClick($index)><div class=md-icon-container><img src="{{item.picture || \'http://lorempixel.com/50/50/people/\'+item.name}}" class=face></div><p class=md-grid-text>{{ item.name }}</p></md-button></md-item></md-list></md-bottom-sheet>'),a.put("app/chat/chat.html",'<h3>Conversation between {{people}}<md-button class=pull-right ng-click=showGridBottomSheet()>Add</md-button></h3><md-list flex class=scroll><md-item ng-repeat="item in messages"><md-item-content><div class=md-tile-left><a ng-href=/details/{{item.id}}><div class="avatar face pull-left" style="background-image: url(\'{{userDetails[item.id].picture || \'http://lorempixel.com/50/50/people/\'+userDetails[item.id].name}}\')" alt={{userDetails[item.id].name}}></div></a></div><div class=md-tile-content><h4><a ng-href=/details/{{item.id}}>{{userDetails[item.id].name}}</a> - {{moment(item.date).fromNow()}}</h4><p>{{item.text}}</p></div></md-item-content></md-item></md-list><form ng-submit=send() class=chat-bar layout=row><md-input-container flex><label>Say Hello!</label><input ng-model=message placeholder="Type a message"></md-input-container><md-button ng-click=send()>Send</md-button></form>'),a.put("app/chats/chats.html",'<div layout=row layout-align="center center" flex ng-if="chats.length === 0"><h3>No recent conversations. :(</h3></div><md-list><md-item ng-repeat="item in chats"><md-item-content><div class=md-tile-left><div class="avatar pull-left" style="background-image: url(\'{{item.face || \'http://lorempixel.com/50/50/abstract/\'+item.names }}\')" class=face alt={{item.who}}></div></div><div class=md-tile-content><h3>{{item.names}}</h3><p>{{item.messages[item.messages.length-1].text}}</p></div><md-button class="pull-right btn" ng-href=#/chat/{{item._id}}>View Chat</md-button></md-item-content><md-divider ng-if=!$last></md-divider></md-item></md-list>'),a.put("app/details/details.html",'<md-content><div layout=row layout-align=center><div flex=55 flex-md=100 flex-sm=100><md-card><div style="background-image: url(\'{{user.picture || \'http://lorempixel.com/640/300/people/\'+user.name}}\')" class=match-hero></div><md-card-content><h1>{{user.name}}</h1><small class=pull-right>Last seen {{moment(user.lastOnline).fromNow()}}.</small><h4 ng-if=user.description>About</h4><p>{{user.description}}</p><h4>Roommate Preferences</h4><p>{{user.gender}} <span ng-show=user.preferedGender>looking for {{user.preferedGender}} roommates</span>. {{user.age}} years old <span ng-show="user.ageRange[0] || user.ageRange[1]">looking for roommates between {{user.ageRange[0]}} and {{user.ageRange[1]}} years old</span>.</p><h3>Rental Details</h3><p>Looking to rent <span ng-show="user.priceRange[0] && user.priceRange[1]">for ${{user.priceRange[0]}} - {{user.priceRange[1]}}</span> <span ng-show=user.preferedLocation>in <a ng-href="https://www.google.com/maps?q={{user.preferedLocation}}">{{user.preferedLocation}}</a></span>.</p><h4>Potential Roommates</h4><ul class="no-space no-style"><li class=roommate-list ng-repeat="x in Roommates"><div class="avatar pull-left" style="background-image: url(\'{{x.picture || \'/assets/images/51feb840.profile-placeholder-dk.png\'}}\')"></div><p>{{x.name}}</p><p></p></li></ul><div like-dislike-buttons user=user></div></md-card-content></md-card></div></div></md-content>'),a.put("app/dislike/dislike.html","<!-- Since I am persisting both likes and dislike data in the same controller, I think I will be using the LikeCtrl for now, might be a good idea to refactor this logic --><div layout=row layout-align=center><div flex=55><md-card class=matches-nav><ul><li class=\"{{matchesNav==='matches' ? 'active' : '' }}\"><a href=/matches>Your <span class=num>{{matches.length}}</span> Matches</a></li><li class=\"{{matchesNav==='like' ? 'active' : '' }}\"><a href=/like>Your <span class=num>{{numLikes}}</span> Likes</a></li><li class=\"{{matchesNav==='dislike' ? 'active' : '' }}\"><a href=/dislike>Your <span class=num>{{dislikePeople.length}}</span> Dislike{{numDislikes>1 ? 's' : ''}}</a></li></ul></md-card><md-list><md-item ng-controller=app.LikeCtrl ng-repeat=\"dislike in dislikePeople\"><md-content><md-card class=match-item><div class=match-hero style=\"background-image: url('{{dislike.picture || 'http://lorempixel.com/640/300/people/'+dislike.name}}')\" alt=\"Washed Out\"></div><md-card-content><span ng-href=/details/{{dislike._id}} class=match-name>{{dislike.name}}</span> <span class=\"pull-right match-pricerange\">Price Range: $ {{dislike.priceRange[0]}} - {{dislike.priceRange[1]}}</span><br><br><div class=match-button-wrapper><md-button ng-controller=DislikeCtrl ng-click=dislike() class=\"md-fab trash-button\" aria-label=Dislike><md-icon icon=/assets/images/9fa116c3.trash.png style=\"width: 24px; height: 24px\"></md-icon></md-button><a ng-href=/details/{{item._id}} class=info-button aria-label=Like><p>info</p></a><md-button ng-controller=DislikeCtrl ng-click=like() class=\"pull-right md-fab\" aria-label=Like><md-icon icon=/assets/images/9321890a.check.png style=\"width: 24px; height: 24px\"></md-icon></md-button></div></md-card-content></md-card></md-content></md-item></md-list></div></div><div layout=row layout-align=\"center center\" flex ng-if=\"likePeople.length === 0\"><h3>No more matches found!</h3></div>"),a.put("app/like-dislike-buttons/like-dislike-buttons.html",'<div class="match-button-wrapper align-center"><md-button ng-click=dislike(user) class="md-fab trash-button pull-left" aria-label=Trash><md-icon icon=/assets/images/9fa116c3.trash.png style="width: 24px; height: 24px"></md-icon></md-button><a ng-href=/details/{{user._id}} class=info-button aria-label=Like><p>info</p></a><md-button ng-click=like(user) class="pull-right md-fab" aria-label=Like><md-icon icon=/assets/images/9321890a.check.png style="width: 24px; height: 24px"></md-icon></md-button></div>'),a.put("app/like/like.html","<div layout=row layout-align=center><div flex=55 flex-md=100 flex-sm=100><md-card class=matches-nav><ul><li class=\"{{matchesNav==='matches' ? 'active' : '' }}\"><a href=#/matches>Your <span class=num>{{matches.length}}</span> Matches</a></li><li class=\"{{matchesNav==='like' ? 'active' : '' }}\"><a href=#/like>Your <span class=num>{{numLikes}}</span> Likes</a></li><li class=\"{{matchesNav==='dislike' ? 'active' : '' }}\"><a href=#/dislike>Your <span class=num>{{numDislikes}}</span> Dislike{{numDislikes>1 ? 's' : ''}}</a></li></ul></md-card><md-list><md-item ng-repeat=\"like in likePeople\"><md-content><md-card><div class=match-hero style=\"background-image: url('{{like.picture || 'http://lorempixel.com/640/300/people/'+like.name}}')\" alt=\"Washed Out\"></div><md-card-content><span ng-href=#/details/{{like._id}} class=match-name>{{like.name}}</span> <span class=\"pull-right match-pricerange\">Price Range: $ {{like.priceRange[0]}} - {{like.priceRange[1]}}</span><br><br><div like-dislike-buttons user=like></div></md-card-content></md-card></md-content></md-item></md-list></div></div><div layout=row layout-align=\"center center\" flex ng-if=\"likePeople.length === 0\"><h3>No opinions found!</h3></div>"),a.put("app/maps/maps.html",'<h3>Find Relevant Housing</h3><p>Once you\'ve found a roommate you can use the following links to find apartments and houses based on your existing preferences.</p><md-button class="md-raised md-large" ng-href="http://www.zillow.com/homes/for_rent/{{location}}/{{beds}}-_beds/{{rangeLower}}-{{rangeHigher}}_mp/"><img src="http://www.zillow.com/widgets/GetVersionedResource.htm?path=/static/logos/Zillowlogo_200x50.gif" width=200 height=60 alt="Zillow Real Estate Search"></md-button><br><md-button class="md-raised md-large" ng-href="https://www.airbnb.com/s/{{location}}?guests={{beds}}&price_min={{rangeLower}}&price_max={{rangeHigher}}"><img src=https://upload.wikimedia.org/wikipedia/commons/thumb/6/69/Airbnb_Logo_B%C3%A9lo.svg/2000px-Airbnb_Logo_B%C3%A9lo.svg.png height=60 alt="airbnb"></md-button><br><md-button class="md-raised md-large" ng-href="http://www.trulia.com/for_rent/{{location}}/{{beds}}p_beds/{{rangeLower}}-{{rangeHigher}}_price/"><img src=http://dsmhomesales.com/wp-content/uploads/2014/02/trulia-png.png height=60 alt="Trulia"></md-button><!-- <div id="map" flex style="height:200px"></div> -->'),a.put("app/matches/matches.html","<div layout=row layout-align=center><div flex=55 flex-md=100 flex-sm=100><md-card class=matches-nav><ul><li class=\"{{matchesNav==='matches' ? 'active' : '' }}\"><a ng-href=#/matches>Your <span class=num>{{matches.length}}</span> Matches</a></li><li class=\"{{matchesNav==='like' ? 'active' : '' }}\"><a ng-href=#/like>Your <span class=num>{{numLikes}}</span> Likes</a></li><li class=\"{{matchesNav==='dislike' ? 'active' : '' }}\"><a ng-href=#/dislike>Your <span class=num>{{numDislikes}}</span> Dislike{{numDislikes>1 ? 's' : ''}}</a></li></ul></md-card><md-list><md-item ng-repeat=\"item in matches\"><md-content><md-card class=match-item><div class=match-hero style=\"background-image: url('{{item.picture || 'http://lorempixel.com/640/300/people/'+item.name}}')\" alt=\"Washed Out\"></div><md-card-content><span ng-href=#/details/{{item._id}} class=match-name>{{item.name}}<img ng-if=item.dependents class=dependents src=/assets/images/185e00ec.dependents.png><small class=dependents ng-if=item.dependents>Dependents</small></span> <span class=\"pull-right match-pricerange\">Price Range: $ {{item.priceRange[0]}} - {{item.priceRange[1]}}</span><br><br><div like-dislike-buttons user=item></div></md-card-content></md-card></md-content></md-item></md-list></div></div><div layout=row layout-align=\"center center\" flex ng-if=\"matches.length === 0\"><h3>No more matches found!</h3></div><!-- <md-content>\n    <md-list>\n      <md-item ng-repeat=\"item in todos\">\n        <md-item-content>\n          <div class=\"md-tile-left\">\n"+'              <img ng-src="{{item.face}}" class="face" alt="{{item.who}}">\n          </div>\n          <div class="md-tile-content">\n            <h3>{{item.what}}</h3>\n            <h4>{{item.who}}</h4>\n            <h4>{{item.age}}</h4>\n            <h4>{{item.price_range}}</h4>\n            <h4>{{item.gender_pref}}</h4>\n            <h4>Prefered number of roomates: {{item.num_roommates}}</h4>\n\n            <p>\n              {{item.notes}}\n            </p>\n          </div>\n        </md-item-content>\n      </md-item>\n    </md-list>\n  </md-content> -->'),a.put("app/pref/pref.html",'<md-content><h3>Tell us a little bit about who you\'re looking for...</h3><h4>Roommate Preferences</h4><div layout=row layout-sm=column><md-checkbox ng-model=user.prefFemale aria-label=Female class=md-warn>Female Roommates</md-checkbox><md-checkbox ng-model=user.prefMale aria-label=Male class=md-warn>Male Roommates</md-checkbox></div><div layout><md-input-container flex><label>Age Prefered-Low</label><input ng-model=user.ageRange[0] placeholder="ex. 19"></md-input-container><md-input-container flex><label>Age Prefered-High</label><input ng-model=user.ageRange[1] placeholder="ex. 30"></md-input-container></div><div layout layout-sm=column><md-input-container flex><label>Number of roommates looking for</label><input ng-model=user.preferedNumber placeholder="ex. 1"></md-input-container></div><h4>Rental Preferences</h4><div layout><md-input-container flex><label>Min Price</label><input ng-model=user.priceRange[0] placeholder="ex. 0"></md-input-container><md-input-container flex><label>Max Price</label><input ng-model=user.priceRange[1] placeholder="ex. 5000"></md-input-container></div><div layout layout-sm=column><md-input-container flex><label>Location (City, State, Zip)</label><input ng-model=user.preferedLocation></md-input-container></div><h3>Tell us a bit about yourself...</h3><div layout layout-sm=column><md-input-container flex><label>Name</label><input ng-model=user.name placeholder=John></md-input-container></div><div layout layout-sm=column><md-input-container flex><label>Age</label><input ng-model=user.age placeholder="ex. 30"></md-input-container></div><div layout layout-sm=column><md-radio-group ng-model=user.gender layout=row layout-sm=column><md-radio-button value=Female aria-label="Label 1">Female</md-radio-button><md-radio-button value=Male>Male</md-radio-button></md-radio-group></div><div layout layout-sm=column><md-input-container flex><label>Dependents or Children</label><input ng-model=user.dependents placeholder="ex. 2"></md-input-container></div><md-input-container><label>About Yourself</label><textarea ng-model=user.description columns=1 md-maxlength=500></textarea></md-input-container><div>Select a photo of yourself: <input type=file id="fileInput"></div><img src="{{user.picture}}"><section layout=row layout-sm=column layout-align="center center"><span><md-button ng-click=save()>save</md-button></span><!-- <span><md-button ng-click="check()">check</md-button></span> --></section></md-content>'),a.put("components/navbar/navbar.html","")
}]);